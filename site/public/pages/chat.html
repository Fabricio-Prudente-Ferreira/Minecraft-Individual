<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Village Craft | Debates</title>
        <link rel="stylesheet" href="../css/style.css">
        <link rel="stylesheet" href="../css/interativos.css">
        <link rel="stylesheet" href="../css/chat.css">
    </head>
    <body>
        <div class="header">
            <div class="container">
                <img src="../images/villageCraftExt.png" alt="VillageCraft">
                <div class="navbar">
                    <a href="./home.html">Home</a>
                    <a href="./chat.html" class="pagina_atual">Assuntos</a>
                    <a href="./quiz.html">Quizzes</a>
                    <a href="./jogo.html">Jogo</a>
                    <a href="./perfil.html">Perfil</a>
                    <a href="./index.html" class="exit">Sair</a>
                </div>
            </div>
        </div>
        <div class="headerTransition"></div>
        <div class="content">
            <div class="container" id="container">
                <span class="title">ASSUNTOS</span>
                <div class="section">
                    <div class="card" onclick="open_chat(1)">
                        <img src="https://beebom.com/wp-content/uploads/2024/04/minecraft-1.21-has-a-name-minecraft-tricky-trials-1.jpg?w=1168&quality=75" alt="Updates">
                        <span class="cardTitle">Atualização - 1.21</span>
                    </div>
                    <div class="card" onclick="open_chat(2)">
                        <img src="https://wallpapercave.com/wp/wp10656185.png" alt="Redstone">
                        <span class="cardTitle">Redstone</span>
                    </div>
                    <div class="card" onclick="open_chat(3)">
                        <img src="https://hypixel.net/attachments/hypiuxel-png-png.2611492/" alt="Hypixel">
                        <span class="cardTitle">Hypixel</span>
                    </div>
                    <div class="card" onclick="open_chat(4)">
                        <img src="https://i.pinimg.com/736x/93/a1/a7/93a1a7ec2b32c2b8a2b5eca8eeefe1a0.jpg" alt="Mobs">
                        <span class="cardTitle">Mobs</span>
                    </div>
                </div>
                <div class="section">
                    <div class="card" onclick="open_chat(5)">
                        <img src="https://www.allaboutgames.net/wp-content/uploads/2023/07/minecraft-server.webp" alt="Servers">
                        <span class="cardTitle">Servers</span>
                    </div>
                    <div class="card" onclick="open_chat(6)">
                        <img src="https://miro.medium.com/v2/resize:fit:1400/1*G_wHQk2D5ZMCl6yW9nZuYw.jpeg" alt="Construções">
                        <span class="cardTitle">Construções</span>
                    </div>
                    <div class="card" onclick="open_chat(7)">
                        <img src="https://static0.gamerantimages.com/wordpress/wp-content/uploads/2023/07/minecraft-1-20-ore-distribution.jpg" alt="Mineração">
                        <span class="cardTitle">Mineração</span>
                    </div>
                    <div class="card" onclick="open_chat(8)">
                        <img src="https://c4.wallpaperflare.com/wallpaper/948/782/354/minecraft-minecraft-dungeons-ocean-view-minecraft-dungeons-hidden-depths-4k-hd-wallpaper-preview.jpg" alt="Mods">
                        <span class="cardTitle">Mods</span>
                    </div>
                </div>
                <div class="section">
                    <div class="card" onclick="open_chat(9)">
                        <img src="https://play.nintendo.com/images/PLAY-6061-MinecraftLegends-Wallpaper-1920x1080_v01.5cbc3862.5b2aa3d3.jpg" alt="Updates">
                        <span class="cardTitle">Minecraft Legends</span>
                    </div>
                    <div class="card" onclick="open_chat(10)">
                        <img src="https://i.ytimg.com/vi/Cv6f-2Wlsxg/maxresdefault.jpg" alt="Redstone">
                        <span class="cardTitle">Minecraft Education</span>
                    </div>
                    <div class="card" onclick="open_chat(11)">
                        <img src="https://wallpapers.com/images/featured/minecraft-dungeons-au24dj020mmcwydu.jpg" alt="Dungeons">
                        <span class="cardTitle">Minecraft Dungeons</span>
                    </div>
                    <div class="card" onclick="open_chat(12)">
                        <img src="../images/background/background.jpg" alt="Mods">
                        <span class="cardTitle">Sugestões</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="footerTransition"></div>
        <div class="footer">
            <div class="container">
                <div class="box">
                    <a href="./home.html" class="navigation">Home</a>
                    <a href="./chat.html" class="navigation">Assuntos</a>
                    <a href="./quiz.html" class="navigation">Quizzes</a>
                    <a href="./perfil.html" class="navigation">Perfil</a>
                </div>
                <img src="../images/villageCraft.png" alt="VillageCraft" class="footerLogo">
            </div>
        </div>
        <div class="footerCopyright">
            <span class="copyright">&copy; 2024 - Desenvolvido por Fabricio Prudente Ferreira | RA: 04241070 | 1-CCO/A | Faculdade São Paulo Tech School</span>
        </div>
    </body>
</html>
<script>
    var conteudo_container = `
        <span class="title">ASSUNTOS</span>
        <div class="section">
            <div class="card">
                <img src="https://beebom.com/wp-content/uploads/2024/04/minecraft-1.21-has-a-name-minecraft-tricky-trials-1.jpg?w=1168&quality=75" alt="Updates">
                <span class="cardTitle">Atualização - 1.21</span>
            </div>
            <div class="card">
                <img src="https://wallpapercave.com/wp/wp10656185.png" alt="Redstone">
                <span class="cardTitle">Redstone</span>
            </div>
            <div class="card">
                <img src="https://hypixel.net/attachments/hypiuxel-png-png.2611492/" alt="Hypixel">
                <span class="cardTitle">Hypixel</span>
            </div>
            <div class="card">
                <img src="https://i.pinimg.com/736x/93/a1/a7/93a1a7ec2b32c2b8a2b5eca8eeefe1a0.jpg" alt="Mobs">
                <span class="cardTitle">Mobs</span>
            </div>
        </div>
        <div class="section">
            <div class="card">
                <img src="https://www.allaboutgames.net/wp-content/uploads/2023/07/minecraft-server.webp" alt="Servers">
                <span class="cardTitle">Servers</span>
            </div>
            <div class="card">
                <img src="https://miro.medium.com/v2/resize:fit:1400/1*G_wHQk2D5ZMCl6yW9nZuYw.jpeg" alt="Construções">
                <span class="cardTitle">Construções</span>
            </div>
            <div class="card">
                <img src="https://static0.gamerantimages.com/wordpress/wp-content/uploads/2023/07/minecraft-1-20-ore-distribution.jpg" alt="Mineração">
                <span class="cardTitle">Mineração</span>
            </div>
            <div class="card">
                <img src="https://c4.wallpaperflare.com/wallpaper/948/782/354/minecraft-minecraft-dungeons-ocean-view-minecraft-dungeons-hidden-depths-4k-hd-wallpaper-preview.jpg" alt="Mods">
                <span class="cardTitle">Mods</span>
            </div>
        </div>
        <div class="section">
            <div class="card">
                <img src="https://play.nintendo.com/images/PLAY-6061-MinecraftLegends-Wallpaper-1920x1080_v01.5cbc3862.5b2aa3d3.jpg" alt="Updates">
                <span class="cardTitle">Minecraft Legends</span>
            </div>
            <div class="card">
                <img src="https://i.ytimg.com/vi/Cv6f-2Wlsxg/maxresdefault.jpg" alt="Redstone">
                <span class="cardTitle">Minecraft Education</span>
            </div>
            <div class="card">
                <img src="https://wallpapers.com/images/featured/minecraft-dungeons-au24dj020mmcwydu.jpg" alt="Dungeons">
                <span class="cardTitle">Minecraft Dungeons</span>
            </div>
            <div class="card">
                <img src="../images/background/background.jpg" alt="Mods">
                <span class="cardTitle">Sugestões</span>
            </div>
        </div>
    `;

    var idChat = 0;

    function open_chat(id){
        idChat = id;

        var message_content = `
            <div class='chatBox' id='chatBox'></div>
            <div class='messageContent'>
                <input id='inp_message' placeholder='Mensagem' class='inputStyle'>
                <button onclick='enviar()'>
                    <img src='../images/imagens/send.png' style='width: 45px; height: 45px;'>    
                </button>
            </div>    
        `;


        container.innerHTML = `<div id='interativo'>${message_content}</div>`;
    }

    function enviar(){
        var messageText = inp_message.value;
        var textErro = "";
        var idUser = sessionStorage.ID_USUARIO;

        if(messageText.length > 200) textErro = "Legal";
        else {
            fetch("../chats/enviar", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    mensagemServer: messageText,
                    idUserServer: idUser,
                    idChatServer: idChat
                }),
            })
            .then(function(resposta){
                if(resposta.ok){
                    var mensagemDivUser = `
                        <div class='messageUser'>
                            <img src='https://i.pinimg.com/originals/85/78/bf/8578bfd439ef6ee41e103ae82b561986.png' id='imageUser' alt='usuario_imagem'>
                            <div class='messageBox'>
                                <div class='messageData'>
                                    <span id='nick'>Nickname</span>
                                    <span id='datetime'>21/12/2005 08:00</span>
                                </div>
                                <span id='messageId'>${messageText}</span>
                            </div>
                        </div>
                    `;
            
                    chatBox.innerHTML += mensagemDivUser;
                } else throw "Houve um erro ao tentar enviar a mensagem!"
            }).catch(function(erro){
                console.log(erro);
            });

            return false;
        }

    }
</script>